{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{Ejrn:function(e,t,a){\"use strict\";a.r(t),function(e){var n=a(\"o0o1\"),r=a.n(n),s=a(\"1OyB\"),l=a(\"vuIU\"),o=a(\"md7G\"),i=a(\"foSv\"),u=a(\"JX7q\"),c=a(\"Ji7U\"),f=a(\"rePB\"),p=a(\"q1tI\"),d=a.n(p),h=a(\"5Yp1\"),m=a(\"lItz\"),b=a(\"oZBQ\"),v=a(\"SqLp\"),j=a(\"vFsZ\"),w=a(\"yE/o\"),g=a(\"QetY\"),S=a(\"8cHP\"),x=d.a.createElement,y=function(t){function a(){var t,n;Object(s.a)(this,a);for(var l=arguments.length,c=new Array(l),p=0;p<l;p++)c[p]=arguments[p];return n=Object(o.a)(this,(t=Object(i.a)(a)).call.apply(t,[this].concat(c))),Object(f.a)(Object(u.a)(n),\"state\",{projName:\"\",description:\"\",file1:\"\",fileName:\"\",fileBuffer:[],fileNames:[],fileCount:\"\",fileInputs:[],uid:0,username:\"\",account:\"\",loading:!1}),Object(f.a)(Object(u.a)(n),\"onSubmit\",(function(e){var t,a,s,l,o,i,u,c,f,p,d;return r.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:e.preventDefault(),console.log(n.state.fileBuffer),console.log(n.state.fileNames),n.setState({loading:!0}),h.prev=4,t=n.state.uid,a=n.state.projName,s=n.state.account,l=n.state.fileNames,o=n.state.description,(i=new Date).setHours(i.getHours()+5),i.setMinutes(i.getMinutes()+30),u=i.toUTCString().replace(\"GMT\",\"IST\"),c=n.state.fileBuffer,f=[],p=0;case 17:if(!(p<c.length)){h.next=25;break}return h.next=20,r.a.awrap(v.a.add(c[p]));case 20:d=h.sent,f.push(d[0].hash);case 22:p++,h.next=17;break;case 25:return console.log(s,f),h.next=28,r.a.awrap(m.a.methods.createProject(t,a,u,o,f,l).send({from:s}));case 28:S.Router.pushRoute(\"/\"),h.next=34;break;case 31:h.prev=31,h.t0=h.catch(4),console.log(h.t0.message);case 34:n.setState({loading:!1});case 35:case\"end\":return h.stop()}}),null,null,[[4,31]],Promise)})),Object(f.a)(Object(u.a)(n),\"captureFile\",(function(e){e.preventDefault();var t=e.target.files[0];n.setState({file1:URL.createObjectURL(t)});var a=new window.FileReader;a.readAsArrayBuffer(t),a.onloadend=function(){return n.convertToBuffer(a,t.name)}})),Object(f.a)(Object(u.a)(n),\"convertToBuffer\",(function(t,a){var s,l,o;return r.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.a.awrap(e.from(t.result));case 2:s=i.sent,l=n.state.fileBuffer,o=n.state.fileNames,l.push(s),o.push(a),n.setState({fileBuffer:l,fileNames:o});case 8:case\"end\":return i.stop()}}),null,null,null,Promise)})),Object(f.a)(Object(u.a)(n),\"renderFileInputs\",(function(e){for(var t=e.target.value,a=[],r=0;r<t;r++){var s=x(j.a.Field,{key:r},x(\"label\",{style:{fontSize:\"15px\"}},\"Upload File \",r+1),x(j.a.Input,{style:{fontSize:\"15px\"},type:\"file\",onChange:function(e){return n.captureFile(e)}}));a.push(s)}n.setState({fileCount:t,fileInputs:a})})),n}return Object(c.a)(a,t),Object(l.a)(a,[{key:\"componentDidMount\",value:function(){var e,t;return r.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.awrap(b.a.eth.getAccounts());case 2:return e=a.sent,a.next=5,r.a.awrap(m.a.methods.getUserDetails(e[0]).call());case 5:t=a.sent,this.setState({account:e[0],uid:t[0],username:t[2]});case 7:case\"end\":return a.stop()}}),null,this,null,Promise)}},{key:\"render\",value:function(){var e=this;return x(h.a,null,x(w.a,{style:{padding:\"10px\"}},x(\"h3\",null,\"Create Project\"),x(\"hr\",null),x(\"br\",null),x(j.a,{onSubmit:this.onSubmit},x(j.a.Field,null,x(\"label\",{style:{fontSize:\"15px\"}},\"Project Name\"),x(j.a.Input,{fluid:!0,style:{fontSize:\"15px\"},placeholder:\"Project Name\",value:this.state.projName,onChange:function(t){return e.setState({projName:t.target.value})}})),x(j.a.Field,null,x(\"label\",{style:{fontSize:\"15px\"}},\"Project Description\"),x(j.a.TextArea,{rows:\"8\",style:{fontSize:\"15px\"},placeholder:\"Project Description\",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})),x(j.a.Field,null,x(\"label\",{style:{fontSize:\"15px\"}},\"No. of Files\"),x(j.a.Input,{fluid:!0,style:{fontSize:\"15px\"},placeholder:\"No. of Files\",value:this.state.fileCount,onChange:function(t){return e.renderFileInputs(t)}})),this.state.fileInputs,x(g.a,{loading:this.state.loading,content:\"Create Project\",size:\"medium\",color:\"teal\",fluid:!0})),x(\"br\",null),x(\"br\",null)))}}]),a}(p.Component);t.default=y}.call(this,a(\"tjlA\").Buffer)},R8w6:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/new\",function(){return a(\"Ejrn\")}])}},[[\"R8w6\",0,2,6,1,3,4,5,8]]]);"}