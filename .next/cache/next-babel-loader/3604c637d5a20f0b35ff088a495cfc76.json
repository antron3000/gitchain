{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/hrishib/Desktop/gitchain/pages/users/index.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport web3 from \"../../ethereum/web3\";\nimport projhub from \"../../ethereum/projhub\";\nimport { Container, List } from \"semantic-ui-react\";\nimport { Link } from \"../../routes\";\n\nvar Users = /*#__PURE__*/function (_Component) {\n  _inherits(Users, _Component);\n\n  function Users() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Users);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Users)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      users: [],\n      userCount: 0,\n      usersList: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderUsers\", function () {\n      var usersList = _this.state.users.map(function (user, index) {\n        return __jsx(List.Item, {\n          key: index,\n          style: {\n            marginBottom: \"10px\",\n            padding: \"10px\",\n            border: \"1px solid\",\n            borderColour: \"grey\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 35\n          },\n          __self: this\n        }, __jsx(List.Content, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 36\n          },\n          __self: this\n        }, __jsx(List.Header, {\n          style: {\n            color: \"teal\",\n            fontSize: \"18px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37\n          },\n          __self: this\n        }, __jsx(Link, {\n          route: \"/users/\".concat(index),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, __jsx(\"a\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 39\n          },\n          __self: this\n        }, user.name))), __jsx(List.Description, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 42\n          },\n          __self: this\n        }, __jsx(\"div\", {\n          style: {\n            marginTop: \"5px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43\n          },\n          __self: this\n        }, __jsx(\"p\", {\n          style: {\n            marginBottom: \"0px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, \"Address: \", user.owner), __jsx(\"p\", {\n          style: {\n            marginTop: \"0px\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 45\n          },\n          __self: this\n        }, \"Projects: \", user.projCount)))));\n      });\n\n      _this.setState({\n        usersList: usersList\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Users, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var accs, userCount, users, i, user;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(web3.eth.getAccounts());\n\n            case 2:\n              accs = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(projhub.methods.userCount().call());\n\n            case 5:\n              userCount = _context.sent;\n              users = [];\n              i = 0;\n\n            case 8:\n              if (!(i < userCount)) {\n                _context.next = 16;\n                break;\n              }\n\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(projhub.methods.users(i).call());\n\n            case 11:\n              user = _context.sent;\n              users.push(user);\n\n            case 13:\n              i++;\n              _context.next = 8;\n              break;\n\n            case 16:\n              console.log(users);\n              this.setState({\n                account: accs[0],\n                userCount: userCount,\n                users: users\n              });\n              this.renderUsers();\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Layout, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, __jsx(Container, {\n        style: {\n          padding: \"10px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, __jsx(\"h3\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, \"Users\"), __jsx(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }), __jsx(List, {\n        items: this.state.usersList,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return Users;\n}(Component);\n\nexport default Users;","map":{"version":3,"sources":["/home/hrishib/Desktop/gitchain/pages/users/index.js"],"names":["React","Component","Layout","web3","projhub","Container","List","Link","Users","users","userCount","usersList","state","map","user","index","marginBottom","padding","border","borderColour","color","fontSize","name","marginTop","owner","projCount","setState","eth","getAccounts","accs","methods","call","i","push","console","log","account","renderUsers"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport web3 from \"../../ethereum/web3\";\nimport projhub from \"../../ethereum/projhub\";\nimport { Container, List } from \"semantic-ui-react\";\nimport {Link} from \"../../routes\";\n\nclass Users extends Component {\n\n  state = {\n    users: [],\n    userCount: 0,\n    usersList: []\n  }\n\n  async componentDidMount() {\n    const accs = await web3.eth.getAccounts();\n    const userCount = await projhub.methods.userCount().call();\n\n    let users = [];\n    for(var i=0; i<userCount; i++) {\n      const user = await projhub.methods.users(i).call();\n      users.push(user);\n    }\n    console.log(users);\n    this.setState({ account: accs[0], userCount: userCount, users: users });\n\n    this.renderUsers();\n\n  }\n\n  renderUsers = () => {\n    const usersList = this.state.users.map((user, index) => {\n      return (\n        <List.Item key={index} style={{marginBottom:\"10px\", padding:\"10px\", border:\"1px solid\", borderColour:\"grey\"}}>\n          <List.Content>\n            <List.Header style={{color:\"teal\", fontSize:\"18px\"}}>\n              <Link route={`/users/${index}`}>\n                <a>{user.name}</a>\n              </Link>\n            </List.Header>\n            <List.Description>\n              <div style={{marginTop:\"5px\"}}>\n                <p style={{marginBottom:\"0px\"}}>Address: {user.owner}</p>\n                <p style={{marginTop:\"0px\"}}>Projects: {user.projCount}</p>\n              </div>\n            </List.Description>\n          </List.Content>\n        </List.Item>\n      );\n    });\n\n    this.setState({ usersList: usersList });\n  }\n\n  render() {\n    return (\n      <Layout>\n        <Container style={{padding:\"10px\"}}>\n          <h3>Users</h3>\n          <hr/>\n          <List items={this.state.usersList}/>\n        </Container>\n      </Layout>\n    );\n  }\n}\n\nexport default Users;\n"]},"metadata":{},"sourceType":"module"}