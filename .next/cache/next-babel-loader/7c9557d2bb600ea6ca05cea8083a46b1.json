{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport Layout from \"../../components/Layout\";\nimport web3 from \"../../ethereum/web3\";\nimport projhub from \"../../ethereum/projhub\";\nimport { Container, List } from \"semantic-ui-react\";\nimport { Link } from \"../../routes\";\n\nvar Users = /*#__PURE__*/function (_Component) {\n  _inherits(Users, _Component);\n\n  function Users() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Users);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Users)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      users: [],\n      userCount: 0,\n      usersList: []\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderUsers\", function () {\n      var usersList = _this.state.users.map(function (user, index) {\n        return __jsx(List.Item, {\n          key: index,\n          style: {\n            marginBottom: \"10px\",\n            padding: \"10px\",\n            border: \"1px solid\",\n            borderColour: \"lightgrey\"\n          }\n        }, __jsx(List.Content, null, __jsx(List.Header, {\n          style: {\n            color: \"teal\",\n            fontSize: \"16px\"\n          }\n        }, __jsx(Link, {\n          route: \"/users/\".concat(index)\n        }, __jsx(\"a\", null, user.name))), __jsx(List.Description, null, __jsx(\"div\", {\n          style: {\n            marginTop: \"5px\"\n          }\n        }, __jsx(\"p\", {\n          style: {\n            marginBottom: \"0px\"\n          }\n        }, \"Address: \", user.owner), __jsx(\"p\", {\n          style: {\n            marginTop: \"0px\"\n          }\n        }, \"Projects: \", user.projCount)))));\n      });\n\n      _this.setState({\n        usersList: usersList\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(Users, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var accs, userCount, users, i, user;\n      return _regeneratorRuntime.async(function componentDidMount$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(web3.eth.getAccounts());\n\n            case 2:\n              accs = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(projhub.methods.userCount().call());\n\n            case 5:\n              userCount = _context.sent;\n              users = [];\n              i = 0;\n\n            case 8:\n              if (!(i < userCount)) {\n                _context.next = 16;\n                break;\n              }\n\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(projhub.methods.users(i).call());\n\n            case 11:\n              user = _context.sent;\n              users.push(user);\n\n            case 13:\n              i++;\n              _context.next = 8;\n              break;\n\n            case 16:\n              console.log(users);\n              this.setState({\n                account: accs[0],\n                userCount: userCount,\n                users: users\n              });\n              this.renderUsers();\n\n            case 19:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return __jsx(Layout, null, __jsx(Container, {\n        style: {\n          padding: \"10px\"\n        }\n      }, __jsx(\"h3\", null, \"Users\"), __jsx(\"hr\", null), __jsx(List, {\n        items: this.state.usersList\n      })));\n    }\n  }]);\n\n  return Users;\n}(Component);\n\nexport default Users;","map":null,"metadata":{},"sourceType":"module"}